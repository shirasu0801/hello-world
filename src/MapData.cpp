#include "MapData.h"

// Tile types:
// 0=Grass, 1=Tree, 2=Water, 3=Mountain, 4=Road, 5=Village(Shop),
// 6=Cave, 7=Castle, 8=Wall, 9=Lava, 10=Floor, 11=StairsDown,
// 12=StairsUp, 13=BossTile, 14=ShopTile

// Stage 1: Grassland
const int MapData::stage1[MAP_HEIGHT][MAP_WIDTH] = {
    {1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,0,0,0,0,0,0,0,1,0,2,2,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,4,4,4,0,0,0,2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,4,5,4,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1},
    {1,0,0,0,4,4,4,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,1},
    {1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,1,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1},
    {1,0,0,0,0,0,0,1,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
};

// Stage 2: Lava Cave
const int MapData::stage2[MAP_HEIGHT][MAP_WIDTH] = {
    {8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8},
    {8,12,10,10,10,10,8,10,10,10,10,8,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,8,10,10,10,10,8,10,10,10,10,10,8,10,10,10,9,9,10,10,10,10,10,10,8},
    {8,10,10,9,9,10,10,10,10,9,10,10,10,10,9,9,10,10,10,10,10,9,9,10,10,10,10,10,10,8},
    {8,10,10,9,9,10,10,10,10,9,10,10,10,10,9,9,10,10,10,10,10,10,10,10,10,8,8,10,10,8},
    {8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,8,8,10,10,10,10,8,14,10,10,8},
    {8,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,8,8,10,10,10,10,8,8,10,10,8},
    {8,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,10,10,8},
    {8,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,8,8,10,10,10,10,8,8,10,10,8},
    {8,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,8,8,10,10,10,10,8,10,10,10,8},
    {8,10,10,9,9,10,10,10,10,9,10,10,10,10,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,10,10,10,9,10,10,10,10,9,9,10,10,10,10,10,9,9,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,8,10,10,10,10,8,10,10,10,10,10,8,10,10,10,9,9,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,8,10,10,10,10,8,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,11,10,8},
    {8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8},
};

// Stage 3: Demon Lord's Castle
const int MapData::stage3[MAP_HEIGHT][MAP_WIDTH] = {
    {8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8},
    {8,12,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,8,10,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,8,10,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,10,10,10,10,10,10,8,8,8,10,10,10,10,10,10,10,10,10,10,8,8,10,10,8},
    {8,10,10,10,10,10,10,10,10,10,10,10,8,8,8,10,10,10,10,10,10,10,10,10,10,8,14,10,10,8},
    {8,10,10,8,8,10,10,10,10,10,10,10,10,10,10,10,10,8,8,10,10,10,10,10,10,8,8,10,10,8},
    {8,10,10,8,8,10,10,10,10,10,10,10,10,10,10,10,10,8,8,10,10,10,10,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,13,10,10,8},
    {8,10,10,8,8,10,10,10,10,10,10,10,10,10,10,10,10,8,8,10,10,10,10,10,10,10,10,10,10,8},
    {8,10,10,8,8,10,10,10,10,10,10,10,10,10,10,10,10,8,8,10,10,10,10,10,10,8,8,10,10,8},
    {8,10,10,10,10,10,10,10,10,10,10,10,8,8,8,10,10,10,10,10,10,10,10,10,10,8,8,10,10,8},
    {8,10,10,10,10,10,10,10,10,10,10,10,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,8,10,10,10,10,10,10,10,8},
    {8,10,10,10,10,10,10,10,8,10,10,10,10,10,10,10,10,10,10,10,10,8,10,10,10,10,10,10,10,8},
    {8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8},
};

int MapData::getTile(int stage, int x, int y) {
    if (x < 0 || x >= MAP_WIDTH || y < 0 || y >= MAP_HEIGHT) return 8; // wall
    switch (stage) {
        case 1: return stage1[y][x];
        case 2: return stage2[y][x];
        case 3: return stage3[y][x];
        default: return 8;
    }
}

bool MapData::isWalkable(int tileType) {
    switch (tileType) {
        case 0:  // Grass
        case 4:  // Road
        case 5:  // Village/Shop
        case 6:  // Cave entrance
        case 10: // Floor
        case 11: // Stairs down
        case 12: // Stairs up
        case 13: // Boss tile
        case 14: // Shop tile
            return true;
        default:
            return false;
    }
}

bool MapData::canEncounter(int tileType) {
    return tileType == 0 || tileType == 10; // Grass or Floor
}

int MapData::getStartX(int stage) {
    switch (stage) {
        case 1: return 2;
        case 2: return 1;
        case 3: return 1;
        default: return 2;
    }
}

int MapData::getStartY(int stage) {
    switch (stage) {
        case 1: return 7;
        case 2: return 1;
        case 3: return 1;
        default: return 7;
    }
}
